{
  "description": "Minimal listing collection flow — collects title, suburb, rent, description, property type, amenities",
  "initial_state": "Trigger",
  "states": [
    {
      "name": "Trigger",
      "type": "trigger",
      "transitions": [
        { "event": "incomingMessage", "next": "ask_title" }
      ],
      "properties": {}
    },
    {
      "name": "ask_title",
      "type": "send-and-wait-for-reply",
      "transitions": [
        { "event": "incomingMessage", "next": "ask_suburb" }
      ],
      "properties": {
        "body": "Welcome — let\\'s create your listing.\\n1) Title\\nPlease reply with the listing Title.",
        "timeout": "3600"
      }
    },
    {
      "name": "ask_suburb",
      "type": "send-and-wait-for-reply",
      "transitions": [
        { "event": "incomingMessage", "next": "ask_rent" }
      ],
      "properties": {
        "body": "2) Suburb — please reply with the suburb name.",
        "timeout": "3600"
      }
    },
    {
      "name": "ask_rent",
      "type": "send-and-wait-for-reply",
      "transitions": [
        { "event": "incomingMessage", "next": "ask_description" }
      ],
      "properties": {
        "body": "3) Weekly Rent ($) — please reply with a number, e.g. 150.",
        "timeout": "3600"
      }
    },
    {
      "name": "ask_description",
      "type": "send-and-wait-for-reply",
      "transitions": [
        { "event": "incomingMessage", "next": "ask_type" }
      ],
      "properties": {
        "body": "4) Description — give a short description of the listing.",
        "timeout": "3600"
      }
    },
    {
      "name": "ask_type",
      "type": "send-and-wait-for-reply",
      "transitions": [
        { "event": "incomingMessage", "next": "ask_amenities" }
      ],
      "properties": {
        "body": "5) Property Type — reply with the number or name:\\n1) Apartment\\n2) House\\n3) Commercial Shop\\n4) Office\\n5) Warehouse\\n6) Land",
        "timeout": "3600"
      }
    },
    {
      "name": "ask_amenities",
      "type": "send-and-wait-for-reply",
      "transitions": [
        { "event": "incomingMessage", "next": "summary" }
      ],
      "properties": {
        "body": "6) Amenities — reply with comma-separated numbers or ids for any that apply:\\n1) Geyser (geyser)\\n2) Parking (parking)\\n3) Water Supply (water_supply)\\n4) Power Backup (power_backup)\\n5) Security (security)\\n6) WiFi (wifi)\\n7) Furnished (furnished)\\n\\nExample: 1,2,6 or geyser,parking,wifi",
        "timeout": "3600"
      }
    },
    {
      "name": "summary",
      "type": "send-message",
      "transitions": [
        { "event": "sent", "next": null }
      ],
      "properties": {
        "body": "Thanks — here\\'s what we received:\\n\\nTitle: {{widgets.ask_title.inbound.Body}}\\nSuburb: {{widgets.ask_suburb.inbound.Body}}\\nRent: {{widgets.ask_rent.inbound.Body}}\\nDescription: {{widgets.ask_description.inbound.Body}}\\nType (raw): {{widgets.ask_type.inbound.Body}}\\nAmenities (raw): {{widgets.ask_amenities.inbound.Body}}\\n\\nIf you want this sent to your API, tell me and I\\'ll add the Make HTTP Request step."
      }
    }
  ]
}
